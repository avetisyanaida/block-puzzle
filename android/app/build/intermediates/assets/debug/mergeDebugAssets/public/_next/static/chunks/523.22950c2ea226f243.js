(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[523],{1803:e=>{e.exports={gridContainer:"GameGrid_gridContainer__VHSbz",row:"GameGrid_row__IPLKZ",cell:"GameGrid_cell__ynUDo",filled:"GameGrid_filled__2i0oo",clearing:"GameGrid_clearing__NznwJ",pulse:"GameGrid_pulse__6yw67",ghost:"GameGrid_ghost__ELko7",empty:"GameGrid_empty__ec7WJ"}},2215:e=>{e.exports={blockWrapper:"DraggableBlock_blockWrapper__N6Dfp",disabled:"DraggableBlock_disabled__2pmok",row:"DraggableBlock_row__TXekZ",cell:"DraggableBlock_cell__ofVRW",filled:"DraggableBlock_filled__5HOpE",empty:"DraggableBlock_empty__cAWSd"}},7523:(e,t,l)=>{"use strict";l.r(t),l.d(t,{BlockPuzzleGame:()=>w});var r=l(5155),n=l(1525),a=l.n(n),c=l(2115),s=l(6613),i=l(8314),o=l(5130),u=l(2068),d=l(1803),h=l.n(d);function p(e){let{grid:t,cellSize:l,ghostPosition:n,clearingCells:a}=e,c=new Set;if(n){let{row:e,col:t,shape:l}=n;for(let r=0;r<l.length;r++)for(let n=0;n<l[r].length;n++)1===l[r][n]&&c.add("".concat(e+r,",").concat(t+n))}return(0,r.jsx)("div",{className:h().gridContainer,style:{touchAction:"none"},children:t.map((e,t)=>(0,r.jsx)("div",{className:h().row,children:e.map((e,n)=>{let s="".concat(t,",").concat(n),i=c.has(s),o=a.has(s),u=1===e,d=h().cell;return u&&!o?d+=" ".concat(h().filled):u&&o?d+=" ".concat(h().clearing):!u&&i?d+=" ".concat(h().ghost):d+=" ".concat(h().empty),(0,r.jsx)("div",{className:d,style:{width:l,height:l}},n)})},t))})}var m=l(2215),f=l.n(m);let g=["#4F46E5","#06B6D4","#22C55E","#F59E0B","#EF4444","#A855F7"];function x(e){let{block:t,blockId:l,cellSize:n,previewCellSize:a,onDragStart:s,onDragMove:i,onDragEnd:o,onDragCancel:u,disabled:d}=e,h=g[l%g.length],p=(0,c.useRef)(!1),m=(0,c.useRef)(null),x=(0,c.useRef)(null),y=(0,c.useRef)({x:0,y:0}),v=(0,c.useCallback)((e,l,r)=>{let a=document.createElement("div");a.style.position="fixed",a.style.pointerEvents="none",a.style.zIndex="9999",a.style.opacity="0.9",a.style.transition="transform 0.05s ease-out",t.forEach(e=>{let t=document.createElement("div");t.style.display="flex",e.forEach(e=>{let l=document.createElement("div");l.style.width="".concat(n,"px"),l.style.height="".concat(n,"px"),l.style.margin="1px",l.style.borderRadius="3px",1===e?(l.style.backgroundColor=h,l.style.boxShadow="inset 0 -2px 4px rgba(0,0,0,0.15), inset 0 1px 2px rgba(255,255,255,0.2)"):l.style.backgroundColor="transparent",t.appendChild(l)}),a.appendChild(t)});let c=t[0].length*(n+2),s=t.length*(n+2),i=r.width/c,o=r.height/s;y.current={x:(e-r.left)/i,y:(l-r.top)/o};let u=2*n;a.style.left="".concat(e-y.current.x,"px"),a.style.top="".concat(l-y.current.y-u,"px"),document.body.appendChild(a),x.current=a},[t,n,h]),b=(0,c.useCallback)(e=>{if(d)return;e.preventDefault(),p.current=!0;let r=m.current.getBoundingClientRect();v(e.clientX,e.clientY,r),s(l,t),e.target.setPointerCapture(e.pointerId)},[t,l,d,v,s]),j=(0,c.useCallback)(e=>{if(!p.current||!x.current)return;let t=2*n;x.current.style.left="".concat(e.clientX-y.current.x,"px"),x.current.style.top="".concat(e.clientY-y.current.y-t,"px"),i(e.clientX-y.current.x,e.clientY-y.current.y-t)},[n,i]),w=(0,c.useCallback)(e=>{if(!p.current)return;p.current=!1,x.current&&(x.current.remove(),x.current=null);let t=2*n;o(e.clientX-y.current.x,e.clientY-y.current.y-t)},[n,o]),_=(0,c.useCallback)(()=>{p.current&&(p.current=!1,x.current&&(x.current.remove(),x.current=null),u())},[u]);return(0,c.useEffect)(()=>()=>{x.current&&x.current.remove()},[]),(0,r.jsx)("div",{ref:m,className:"".concat(f().blockWrapper," ").concat(d?f().disabled:""),onPointerDown:b,onPointerMove:j,onPointerUp:w,onPointerCancel:_,style:{touchAction:"none"},children:t.map((e,t)=>(0,r.jsx)("div",{className:f().row,children:e.map((e,t)=>(0,r.jsx)("div",{className:"".concat(f().cell," ").concat(1===e?f().filled:f().empty),style:{width:a,height:a,backgroundColor:1===e?h:"transparent"}},t))},t))})}let y=[[[1,1],[1,1]],[[1,1,1]],[[1],[1],[1]],[[1,1]],[[1],[1]],[[1]],[[1,1,1,1]],[[1],[1],[1],[1]],[[1,0],[1,1]],[[0,1],[1,1]],[[1,1,1],[1,0,0]],[[1,1,1],[0,0,1]],[[1,1,1],[1,1,1],[1,1,1]]],v=()=>y[Math.floor(Math.random()*y.length)],b=()=>Array(10).fill(0).map(()=>Array(10).fill(0));var j=l(6201);function w(){let e=function(){let[e,t]=(0,c.useState)(36);return(0,c.useEffect)(()=>{function e(){t(Math.floor((Math.min(window.innerWidth-48,420)-8-20)/10))}return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),e}(),t=Math.floor(.6*e),{showInterstitial:l}=((0,c.useEffect)(()=>{(async()=>{await j.IW.initialize()})()},[]),{showInterstitial:async()=>{try{await j.IW.prepareInterstitial({adId:"ca-app-pub-2296093498264168/1675054333"}),await j.IW.showInterstitial()}catch(e){console.error("AdMob Error:",e)}}}),[n,d]=(0,c.useState)(90),[h,m]=(0,c.useState)(!1),{init:f,playClick:g,playPlace:y,playClear:w,playGameOver:_,enabled:C,toggle:k}=function(){let e=(0,c.useRef)(null),t=(0,c.useRef)(null),l=(0,c.useRef)(null),r=(0,c.useRef)(null),[n,a]=(0,c.useState)(!0);function s(e){e&&n&&(e.currentTime=0,e.play().then(e=>e))}return{init:function(){e.current=new Audio("/sounds/click.mp3"),t.current=new Audio("/sounds/click.mp3"),l.current=new Audio("/sounds/pop-combo.mp3"),r.current=new Audio("/sounds/win.mp3"),e.current.volume=.4,t.current.volume=.5,l.current.volume=.6,r.current.volume=.7},enabled:n,toggle:function(){a(n=>{let a=!n;return a||[e.current,t.current,l.current,r.current].forEach(e=>{e&&(e.pause(),e.currentTime=0)}),a})},playClick:()=>s(e.current),playPlace:()=>s(t.current),playClear:()=>s(l.current),playGameOver:()=>s(r.current)}}();(0,c.useEffect)(()=>{f()},[]);let{grid:N,blocks:E,score:S,highScore:G,gameOver:A,ghostPosition:z,clearingCells:D,combo:B,gridRef:R,handleDragStart:I,handleDragMove:M,handleDragEnd:P,handleDragCancel:W,resetGame:T}=function(e){let{sounds:t}=e,[l,r]=(0,c.useState)(b),[n,a]=(0,c.useState)([{id:1,shape:v()},{id:2,shape:v()},{id:3,shape:v()}]),[s,i]=(0,c.useState)(0),[o,u]=(0,c.useState)(0),[d,h]=(0,c.useState)(!1),[p,m]=(0,c.useState)(null),[f,g]=(0,c.useState)(new Set),[x,y]=(0,c.useState)(0),j=(0,c.useRef)(null),w=(0,c.useRef)(null),_=(0,c.useCallback)((e,t,l)=>{if(!j.current)return null;let r=j.current.getBoundingClientRect(),n=r.left+4,a=r.top+4,c=(r.width-8)/10,s=Math.round((e-n)/c),i=Math.round((t-a)/c);return i>=0&&s>=0&&i+l.length<=10&&s+l[0].length<=10?{row:i,col:s}:null},[]),C=(0,c.useCallback)((e,t,r)=>{for(let n=0;n<r.length;n++)for(let a=0;a<r[n].length;a++)if(1===r[n][a]&&1===l[e+n][t+a])return!1;return!0},[l]),k=(0,c.useCallback)((e,t)=>{w.current={id:e,shape:t}},[]),N=(0,c.useCallback)((e,t)=>{if(!w.current)return;let{shape:l}=w.current,r=_(e,t,l);r&&C(r.row,r.col,l)?m({row:r.row,col:r.col,shape:l}):m(null)},[_,C]),E=(0,c.useCallback)((e,l)=>{if(!w.current)return;let{id:n,shape:c}=w.current;w.current=null,m(null);let s=_(e,l,c);if(!s||!C(s.row,s.col,c))return;t.playPlace();let{row:o,col:d}=s;r(e=>{let l=e.map(e=>[...e]);for(let e=0;e<c.length;e++)for(let t=0;t<c[e].length;t++)1===c[e][t]&&(l[o+e][d+t]=1);let{newBoard:s,cleared:p,clearingCells:m}=function(e){let t=e.map(e=>[...e]),l=[],r=[];for(let e=0;e<10;e++)t[e].every(e=>1===e)&&l.push(e);for(let e=0;e<10;e++)t.every(t=>1===t[e])&&r.push(e);let n=new Set;return l.forEach(e=>{for(let t=0;t<10;t++)n.add("".concat(e,",").concat(t))}),r.forEach(e=>{for(let t=0;t<10;t++)n.add("".concat(t,",").concat(e))}),l.forEach(e=>t[e]=Array(10).fill(0)),r.forEach(e=>t.forEach(t=>t[e]=0)),{newBoard:t,cleared:l.length+r.length,clearingCells:n}}(l);if(p>0){t.playClear(),g(m),y(e=>e+1),setTimeout(()=>g(new Set),300),t.playClear();let e=c.flat().filter(e=>1===e).length,l=100*p;i(t=>{let r=t+e+l;return u(e=>Math.max(e,r)),r})}else{let e=c.flat().filter(e=>1===e).length;i(t=>{let l=t+e;return u(e=>Math.max(e,l)),l}),y(0)}return a(e=>{let l=e.map(e=>e.id===n?{...e,shape:v()}:e);return setTimeout(()=>{r(e=>(l.some(t=>(function(e,t){for(let l=0;l<=10-t.length;l++)for(let r=0;r<=10-t[0].length;r++){let n=!0;for(let a=0;a<t.length&&n;a++)for(let c=0;c<t[a].length&&n;c++)1===t[a][c]&&1===e[l+a][r+c]&&(n=!1);if(n)return!0}return!1})(e,t.shape))||(t.playGameOver(),h(!0)),e))},350),l}),p>0?s:l})},[_,C]);return{grid:l,blocks:n,score:s,highScore:o,gameOver:d,ghostPosition:p,clearingCells:f,combo:x,gridRef:j,handleDragStart:k,handleDragMove:N,handleDragEnd:E,handleDragCancel:(0,c.useCallback)(()=>{w.current=null,m(null)},[]),resetGame:(0,c.useCallback)(()=>{r(b()),a([{id:1,shape:v()},{id:2,shape:v()},{id:3,shape:v()}]),i(0),h(!1),y(0),g(new Set)},[])}}({sounds:{playClick:g,playPlace:y,playClear:w,playGameOver:_}});return(0,c.useEffect)(()=>{(A||h)&&l().then(e=>e)},[A,h]),(0,c.useEffect)(()=>{if(A||h)return;let e=setInterval(()=>{d(e=>e<=1?(m(!0),0):e-1)},1e3);return()=>clearInterval(e)},[A,h]),(0,c.useEffect)(()=>{if(B>0&&!A&&!h){let e=0;1===B?e=9:2===B?e=13:B>=3&&(e=19),d(t=>t+e)}},[B]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h2",{style:{margin:0},children:"BLOCK PUZZLE GAME"}),(0,r.jsx)("button",{onClick:k,className:a().soundButton,children:C?(0,r.jsx)(o.A,{size:20}):(0,r.jsx)(u.A,{size:20})}),(0,r.jsxs)("div",{className:a().header,children:[(0,r.jsxs)("div",{className:a().stat,children:[(0,r.jsx)("span",{className:a().label,children:"Score"}),(0,r.jsx)("span",{className:a().score,children:S})]}),(0,r.jsxs)("div",{className:a().statCenter,children:[(0,r.jsx)("span",{className:a().label,children:"Time"}),(0,r.jsxs)("span",{className:"".concat(a().time," ").concat(n<=10?a().timeDanger:""),children:[n,"s"]})]}),(0,r.jsxs)("div",{className:a().statRight,children:[(0,r.jsx)("span",{className:a().label,children:"Best"}),(0,r.jsxs)("div",{className:a().bestRow,children:[(0,r.jsx)(s.A,{size:16}),(0,r.jsx)("span",{className:a().score,children:G})]})]})]}),B>1&&(0,r.jsxs)("div",{className:a().combo,children:[B,"x Combo!"]}),(0,r.jsx)("div",{className:a().gridWrapper,ref:R,style:{position:"relative"},children:(0,r.jsx)(p,{grid:N,cellSize:e,ghostPosition:z,clearingCells:D})}),(0,r.jsx)("div",{className:a().tray,children:E.map(l=>(0,r.jsx)(x,{block:l.shape,blockId:l.id,cellSize:e,previewCellSize:t,onDragStart:I,onDragMove:M,onDragEnd:P,onDragCancel:W,disabled:A||h},l.id))}),h&&(0,r.jsx)("div",{className:a().overlay,children:(0,r.jsxs)("div",{className:a().modal,children:[(0,r.jsx)("h2",{className:a().modalTitle,children:"Time's Up!"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:a().finalScore,children:S}),(0,r.jsx)("span",{children:"Final Score"})]}),(0,r.jsxs)("button",{onClick:()=>{d(90),m(!1),T()},className:a().playButton,children:[(0,r.jsx)(i.A,{size:20}),"Play Again"]})]})}),A&&!h&&(0,r.jsx)("div",{className:a().overlay,children:(0,r.jsxs)("div",{className:a().modal,children:[(0,r.jsx)("h2",{className:a().modalTitle,children:"Game Over"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:a().finalScore,children:S}),(0,r.jsx)("span",{children:"Final Score"})]}),S>=G&&S>0&&(0,r.jsxs)("div",{className:a().newHighScore,children:[(0,r.jsx)(s.A,{size:16}),"New High Score!"]}),(0,r.jsxs)("button",{onClick:T,className:a().playButton,children:[(0,r.jsx)(i.A,{size:20}),"Play Again"]})]})})]})}}}]);